<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘» Halloween Costume Flex & Scare Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸƒ Halloween Costume Flex-O-Matic 3000 ğŸƒ</h1>
            <p class="subtitle">Show off your costume... if you dare! ğŸ’€</p>
            <div class="warning">âš ï¸ WARNING: Your flex might come with a surprise... âš ï¸</div>
        </div>

        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <div class="upload-content">
                    <svg class="ghost-icon" viewBox="0 0 100 100">
                        <path d="M50 20 C30 20 15 35 15 55 L15 75 C15 80 20 75 25 80 C30 85 35 80 40 85 C45 90 50 85 55 90 C60 85 65 90 70 85 C75 80 80 85 85 80 L85 55 C85 35 70 20 50 20 Z" fill="white"/>
                        <circle cx="35" cy="40" r="5" fill="black"/>
                        <circle cx="65" cy="40" r="5" fill="black"/>
                        <ellipse cx="50" cy="55" rx="8" ry="10" fill="black"/>
                    </svg>
                    <h2>Drop Your Costume Pic Here!</h2>
                    <p>or click to browse</p>
                    <input type="file" id="fileInput" accept="image/*" hidden>
                </div>
            </div>
        </div>

        <div class="controls" id="controls" style="display: none;">
            <div class="filter-section">
                <h3>Choose Your Spooky Style:</h3>
                <div class="filter-buttons">
                    <button class="filter-btn" data-filter="vampire">ğŸ§› Vampire Vibes</button>
                    <button class="filter-btn" data-filter="zombie">ğŸ§Ÿ Zombie Mode</button>
                    <button class="filter-btn" data-filter="ghost">ğŸ‘» Ghostly</button>
                    <button class="filter-btn" data-filter="pumpkin">ğŸƒ Pumpkin Spice</button>
                    <button class="filter-btn" data-filter="witch">ğŸ§™ Witchy</button>
                    <button class="filter-btn" data-filter="demon">ğŸ˜ˆ Demon</button>
                    <button class="filter-btn" data-filter="skeleton">ğŸ’€ Skeleton</button>
                    <button class="filter-btn" data-filter="possessed">ğŸ‘¹ Possessed</button>
                </div>
            </div>

            <div class="api-section">
                <label for="apiKey">Gemini API Key (for AI roasting):</label>
                <input type="password" id="apiKey" placeholder="Enter your Gemini API key">
                <button id="testApi">Test API</button>
            </div>

            <button class="generate-btn" id="generateBtn">
                ğŸ¬ Generate Flex GIF (with surprise!) ğŸ¬
            </button>
        </div>

        <div class="preview-section" id="previewSection" style="display: none;">
            <h3>Preview:</h3>
            <canvas id="canvas" width="600" height="600"></canvas>
            <div id="aiResponse" class="ai-response"></div>
        </div>

        <div class="result-section" id="resultSection" style="display: none;">
            <h3>Your Spooky Flex GIF is Ready! ğŸ‰</h3>
            <p class="result-warning">Share with friends... but warn them first! ğŸ˜ˆ</p>
            <img id="resultGif" src="" alt="Generated GIF">
            <div class="share-buttons">
                <button id="downloadBtn">ğŸ’¾ Download GIF</button>
                <button id="copyLinkBtn">ğŸ“‹ Copy Shareable Link</button>
                <button id="tryAgainBtn">ğŸ”„ Try Another Photo</button>
            </div>
        </div>

        <div class="loading" id="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Summoning the spirits... ğŸ‘»</p>
        </div>
    </div>

    <!-- Hidden canvas for jumpscare frame -->
    <canvas id="jumpscareCanvas" width="600" height="600" style="display: none;"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@google/generative-ai@0.1.3/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4.1646425229/face_detection.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3.1640029074/camera_utils.js"></script>
    <script src="app.js"></script>
</body>
</html>